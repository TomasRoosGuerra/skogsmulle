<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Skogsmulle - Magiska √§ventyr f√∂r barn</title>
    <meta
      name="description"
      content="Uppt√§ck Skogsmulles magiska v√§rld med underbara ber√§ttelser f√∂r barn. Perfekt f√∂r f√∂r√§ldrar som vill l√§sa sagor f√∂r sina barn."
    />
    <style>
      /* Base styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #f5f4e8;
        color: #3d4a2d;
        background-image: 
          radial-gradient(circle at 20% 80%, rgba(144, 180, 120, 0.08) 0%, transparent 50%),
          radial-gradient(circle at 80% 20%, rgba(120, 150, 180, 0.06) 0%, transparent 50%),
          radial-gradient(circle at 40% 40%, rgba(160, 200, 140, 0.05) 0%, transparent 50%),
          url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><defs><filter id="watercolor"><feTurbulence baseFrequency="0.02" numOctaves="3" result="noise"/><feColorMatrix values="0 0 0 0 0.8 0 0 0 0 0.9 0 0 0 0 0.7 0 0 0 0.1 0"/></filter></defs><rect width="100" height="100" fill="%23f5f4e8" filter="url(%23watercolor)"/></svg>');
        background-size: 200px 200px, 300px 300px, 250px 250px, 150px 150px;
        line-height: 1.6;
        min-height: 100vh;
        font-family: "Georgia", "Times New Roman", serif;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Header styles */
      header {
        background: linear-gradient(
          135deg,
          rgba(144, 180, 120, 0.15),
          rgba(120, 150, 180, 0.12),
          rgba(160, 200, 140, 0.08)
        );
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 25px;
        border: 2px solid rgba(144, 180, 120, 0.3);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(3px);
      }

      .header-background {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: url("skogsmullecolor.png");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        opacity: 0.6;
        z-index: 0;
      }

      .header-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        position: relative;
        z-index: 1;
      }

      .logo {
        font-size: 2.8rem;
        font-weight: bold;
        color: #4a5d3a;
        text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
        margin-bottom: 12px;
        font-family: "Georgia", "Times New Roman", serif;
        font-style: italic;
      }

      .audio-player {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.8),
          rgba(144, 238, 144, 0.3)
        );
        border-radius: 20px;
        padding: 15px;
        display: flex;
        align-items: center;
        gap: 15px;
        border: 2px solid rgba(144, 238, 144, 0.5);
        margin-bottom: 15px;
        backdrop-filter: blur(5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .audio-player button {
        background: linear-gradient(135deg, #90ee90, #87ceeb);
        color: white;
        border: none;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        cursor: pointer;
        font-size: 1.3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
      }

      .audio-player button:hover {
        transform: scale(1.1) rotate(5deg);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      }

      .audio-title {
        color: #2d5016;
        font-weight: bold;
        font-size: 1.1rem;
      }

      /* Navigation */
      nav {
        background: linear-gradient(
          135deg,
          rgba(144, 238, 144, 0.5),
          rgba(135, 206, 235, 0.4)
        );
        border-radius: 20px;
        padding: 15px;
        margin: 15px 0;
        backdrop-filter: blur(5px);
        border: 2px solid rgba(144, 238, 144, 0.4);
      }

      nav ul {
        display: flex;
        list-style: none;
        justify-content: space-around;
        flex-wrap: wrap;
      }

      nav a {
        color: #2d5016;
        text-decoration: none;
        font-weight: bold;
        padding: 10px 15px;
        border-radius: 15px;
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.3);
      }

      nav a:hover {
        background: rgba(144, 238, 144, 0.6);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      /* Main content */
      main {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
      }

      .blog-section {
        flex: 3;
        min-width: 300px;
      }

      .sidebar {
        flex: 1;
        min-width: 250px;
      }

      /* Blog post styles */
      .blog-post {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.9),
          rgba(248, 248, 240, 0.8)
        );
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        border: 1px solid rgba(144, 180, 120, 0.2);
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.06);
        backdrop-filter: blur(2px);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .blog-post::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><defs><filter id="paper"><feTurbulence baseFrequency="0.01" numOctaves="2" result="noise"/><feColorMatrix values="0 0 0 0 0.9 0 0 0 0 0.9 0 0 0 0 0.8 0 0 0 0.05 0"/></filter></defs><rect width="100" height="100" fill="white" filter="url(%23paper)"/></svg>');
        opacity: 0.3;
        z-index: 0;
      }

      .blog-post:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      }

      .post-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        border-bottom: 1px dashed rgba(144, 180, 120, 0.3);
        padding-bottom: 10px;
        position: relative;
        z-index: 1;
      }

      .post-title {
        color: #4a5d3a;
        font-size: 1.4rem;
        font-weight: bold;
        font-family: "Georgia", "Times New Roman", serif;
        font-style: italic;
      }

      .post-date {
        color: #6a7a5a;
        font-style: italic;
        font-size: 0.85rem;
      }

      .post-content {
        margin-bottom: 15px;
        color: #3d4a2d;
        line-height: 1.7;
        position: relative;
        z-index: 1;
        font-size: 1rem;
      }

      .post-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .post-button {
        background: linear-gradient(135deg, #90ee90, #87ceeb);
        color: white;
        border: none;
        border-radius: 15px;
        padding: 8px 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
      }

      .post-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .post-button.edit {
        background: linear-gradient(135deg, #98fb98, #87ceeb);
      }

      .post-button.delete {
        background: linear-gradient(135deg, #ffb6c1, #ffa07a);
      }

      /* Sidebar styles */
      .sidebar-widget {
        background: linear-gradient(to bottom, #5a8c3a, #3a6620);
        border-radius: 15px;
        padding: 15px;
        margin-bottom: 20px;
        border: 3px solid #8a6d3b;
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
      }

      .widget-title {
        color: #f9f1a5;
        border-bottom: 2px dashed #f9f1a5;
        padding-bottom: 5px;
        margin-bottom: 10px;
      }

      /* Form styles */
      .new-post-form {
        background: linear-gradient(to bottom, #5a8c3a, #3a6620);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        border: 3px solid #8a6d3b;
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
      }

      .form-title {
        color: #f9f1a5;
        margin-bottom: 15px;
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        color: #f9f1a5;
      }

      .form-group input,
      .form-group textarea {
        width: 100%;
        padding: 8px;
        border-radius: 5px;
        border: 2px solid #8a6d3b;
        background-color: #f0f7da;
      }

      .submit-button {
        background-color: #8a6d3b;
        color: #f9f1a5;
        border: none;
        border-radius: 5px;
        padding: 10px 20px;
        cursor: pointer;
        font-size: 1rem;
        transition: all 0.3s;
      }

      .submit-button:hover {
        background-color: #f9f1a5;
        color: #8a6d3b;
      }

      /* Form styles */
      .new-post-form {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.8),
          rgba(144, 238, 144, 0.2)
        );
        border-radius: 25px;
        padding: 25px;
        margin-bottom: 25px;
        border: 2px solid rgba(144, 238, 144, 0.3);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(5px);
      }

      .form-title {
        color: #2d5016;
        margin-bottom: 20px;
        font-size: 1.3rem;
        font-weight: bold;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: #2d5016;
        font-weight: bold;
      }

      .form-group input,
      .form-group textarea {
        width: 100%;
        padding: 12px;
        border-radius: 15px;
        border: 2px solid rgba(144, 238, 144, 0.3);
        background: rgba(255, 255, 255, 0.8);
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .form-group input:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #90ee90;
        box-shadow: 0 0 15px rgba(144, 238, 144, 0.3);
      }

      .submit-button {
        background: linear-gradient(135deg, #90ee90, #87ceeb);
        color: white;
        border: none;
        border-radius: 20px;
        padding: 12px 25px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: bold;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .submit-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      /* Footer */
      footer {
        text-align: center;
        margin-top: 40px;
        padding: 30px;
        border-top: 3px dashed rgba(144, 238, 144, 0.5);
        color: #2d5016;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.5),
          rgba(144, 238, 144, 0.1)
        );
        border-radius: 25px 25px 0 0;
      }

      /* Authentication styles */
      .auth-section {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.8),
          rgba(144, 238, 144, 0.2)
        );
        border-radius: 25px;
        padding: 25px;
        margin-bottom: 25px;
        border: 2px solid rgba(144, 238, 144, 0.3);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(5px);
        text-align: center;
      }

      .login-button {
        background: linear-gradient(135deg, #90ee90, #87ceeb);
        color: white;
        border: none;
        border-radius: 20px;
        padding: 12px 25px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: bold;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        margin: 10px;
      }

      .login-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      .user-info {
        color: #2d5016;
        margin-bottom: 15px;
      }

      .admin-controls {
        display: none;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 2px dashed rgba(144, 238, 144, 0.5);
      }

      .admin-controls.show {
        display: block;
      }

      /* Sidebar styles */
      .sidebar-widget {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.9),
          rgba(248, 248, 240, 0.8)
        );
        border-radius: 12px;
        padding: 18px;
        margin-bottom: 18px;
        border: 1px solid rgba(144, 180, 120, 0.2);
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.06);
        backdrop-filter: blur(2px);
        position: relative;
        overflow: hidden;
      }

      .sidebar-widget::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><defs><filter id="paper"><feTurbulence baseFrequency="0.01" numOctaves="2" result="noise"/><feColorMatrix values="0 0 0 0 0.9 0 0 0 0 0.9 0 0 0 0 0.8 0 0 0 0.05 0"/></filter></defs><rect width="100" height="100" fill="white" filter="url(%23paper)"/></svg>');
        opacity: 0.2;
        z-index: 0;
      }

      .widget-title {
        color: #4a5d3a;
        border-bottom: 1px dashed rgba(144, 180, 120, 0.3);
        padding-bottom: 8px;
        margin-bottom: 12px;
        font-size: 1.1rem;
        font-weight: bold;
        font-family: "Georgia", "Times New Roman", serif;
        font-style: italic;
        position: relative;
        z-index: 1;
      }

      /* Author info styling */
      .author-info {
        background: rgba(144, 180, 120, 0.1);
        padding: 10px;
        border-radius: 8px;
        margin-bottom: 12px;
        border-left: 3px solid rgba(144, 180, 120, 0.4);
        font-size: 0.9rem;
        line-height: 1.4;
        position: relative;
        z-index: 1;
      }

      .login-note {
        margin-top: 8px;
        color: #6a7a5a;
        font-style: italic;
        position: relative;
        z-index: 1;
      }

      .sidebar-widget ul {
        list-style: none;
      }

      .sidebar-widget li {
        margin-bottom: 8px;
      }

      .sidebar-widget a {
        color: #2d5016;
        text-decoration: none;
        padding: 5px 10px;
        border-radius: 10px;
        transition: all 0.3s ease;
        display: block;
      }

      .sidebar-widget a:hover {
        background: rgba(144, 238, 144, 0.3);
        transform: translateX(5px);
      }

      /* Magical Welcome Section */
      .welcome-section {
        text-align: center;
        padding: 30px 20px;
        position: relative;
        z-index: 1;
        margin-top: 20px;
      }

      .magical-title {
        font-size: 2.2rem;
        color: #4a5d3a;
        text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.9);
        margin-bottom: 18px;
        font-family: "Georgia", "Times New Roman", serif;
        font-style: italic;
        animation: gentleGlow 4s ease-in-out infinite alternate;
      }

      @keyframes gentleGlow {
        from {
          text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.9),
            0 0 8px rgba(144, 180, 120, 0.3);
        }
        to {
          text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.9),
            0 0 12px rgba(144, 180, 120, 0.5);
        }
      }

      .welcome-text {
        font-size: 1.1rem;
        color: #3d4a2d;
        margin-bottom: 25px;
        line-height: 1.6;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        font-style: italic;
      }

      .audience-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
      }

      .audience-btn {
        background: linear-gradient(135deg, rgba(144, 180, 120, 0.8), rgba(120, 150, 180, 0.7));
        color: #2d3a2d;
        border: 1px solid rgba(144, 180, 120, 0.4);
        border-radius: 12px;
        padding: 12px 24px;
        font-size: 1rem;
        font-weight: normal;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        text-shadow: none;
        font-family: "Georgia", "Times New Roman", serif;
      }

      .audience-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        background: linear-gradient(135deg, rgba(144, 180, 120, 0.9), rgba(120, 150, 180, 0.8));
      }

      .parent-btn {
        background: linear-gradient(135deg, rgba(160, 200, 140, 0.8), rgba(120, 150, 180, 0.7));
      }

      .child-btn {
        background: linear-gradient(135deg, rgba(180, 160, 140, 0.8), rgba(160, 200, 140, 0.7));
      }

      /* Story Search and Categories */
      .story-search {
        margin-bottom: 15px;
      }

      .story-search input {
        width: 100%;
        padding: 10px;
        border-radius: 15px;
        border: 2px solid rgba(144, 238, 144, 0.3);
        background: rgba(255, 255, 255, 0.8);
        font-size: 0.9rem;
      }

      .story-categories {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        margin-bottom: 15px;
      }

      .category-btn {
        background: rgba(144, 238, 144, 0.3);
        border: none;
        border-radius: 10px;
        padding: 5px 10px;
        font-size: 0.8rem;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .category-btn:hover,
      .category-btn.active {
        background: rgba(144, 238, 144, 0.6);
        transform: scale(1.05);
      }

      /* Character Grid */
      .character-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-top: 10px;
      }

      .character-card {
        background: rgba(255, 255, 255, 0.5);
        border-radius: 15px;
        padding: 10px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid rgba(144, 238, 144, 0.3);
      }

      .character-card:hover {
        background: rgba(144, 238, 144, 0.3);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .character-icon {
        font-size: 1.5rem;
        margin-bottom: 5px;
      }

      .character-card span {
        font-size: 0.8rem;
        color: #2d5016;
        font-weight: bold;
      }

      /* Parent Tips */
      .parent-tips p {
        margin-bottom: 10px;
        font-size: 0.9rem;
        color: #2d4a2d;
        line-height: 1.4;
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .header-content {
          flex-direction: column;
          align-items: flex-start;
        }

        .audio-player {
          align-self: stretch;
        }

        nav ul {
          flex-direction: column;
          align-items: center;
        }

        nav li {
          margin: 5px 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="header-background"></div>
        <div class="header-content">
          <div class="logo">Skogsmulle</div>
          <div class="audio-player">
            <button id="playTheme">‚ñ∂</button>
            <span class="audio-title">Skogsmulle l√•t</span>
            <button id="playAdventure">‚ñ∂</button>
            <span class="audio-title">√Ñventyr l√•t</span>
          </div>
        </div>
        <nav>
          <ul>
            <li><a href="#hem">Hem</a></li>
            <li><a href="#berattelser">Ber√§ttelser</a></li>
            <li><a href="#karaktarer">Karakt√§rer</a></li>
            <li><a href="#aktiviteter">Aktiviteter</a></li>
            <li><a href="#om-skogsmulle">Om Skogsmulle</a></li>
          </ul>
        </nav>

        <!-- Magical Welcome Section -->
        <div class="welcome-section">
          <h1 class="magical-title">
            V√§lkommen till Skogsmulles magiska v√§rld!
          </h1>
          <p class="welcome-text">
            H√§r kan du uppt√§cka underbara √§ventyr, l√§sa sagor f√∂r dina barn och
            utforska en v√§rld full av fantasi och √§ventyr.
          </p>
          <div class="audience-buttons">
            <button class="audience-btn parent-btn" onclick="scrollToStories()">
              üë®‚Äçüë©‚Äçüëß‚Äçüë¶ F√∂r f√∂r√§ldrar
            </button>
            <button
              class="audience-btn child-btn"
              onclick="scrollToAdventures()"
            >
              üßö‚Äç‚ôÄÔ∏è F√∂r barn
            </button>
          </div>
        </div>
      </header>

      <main>
        <section class="blog-section">
          <article class="blog-post">
            <div class="post-header">
              <h2 class="post-title">Mulle m√∂ter en ekorre</h2>
              <span class="post-date">15 Maj, 2023</span>
            </div>
            <div class="post-content">
              <p>
                Idag var Mulle ute och gick i skogen. Solen sken och f√•glarna
                sj√∂ng. Pl√∂tsligt h√∂rde Mulle ett litet prasslande ljud fr√•n en
                gran.
              </p>
              <p>
                Han tittade upp och s√•g en liten ekorre som hoppade fr√•n gren
                till gren. Ekorren hade en stor, fluffig svans och var v√§ldigt
                r√∂rlig.
              </p>
              <p>"Hej, lilla ekorre!" ropade Mulle. "Vad g√∂r du?"</p>
              <p>
                Ekorren stannade och tittade ner p√• Mulle. "Jag samlar n√∂tter
                inf√∂r vintern," svarade den. "Vill du hj√§lpa mig?"
              </p>
              <p>
                Mulle log och nickade. Tillsammans samlade de n√∂tter hela
                eftermiddagen. Det var ett riktigt √§ventyr!
              </p>
            </div>
            <div class="post-actions">
              <button class="post-button">Dela</button>
              <button class="post-button">Gilla</button>
              <button class="post-button">Spara</button>
              <button
                class="post-button edit admin-only"
                onclick="editPost(this)"
                style="display: none"
              >
                Redigera
              </button>
              <button
                class="post-button delete admin-only"
                onclick="deletePost(this)"
                style="display: none"
              >
                Ta bort
              </button>
            </div>
          </article>

          <article class="blog-post">
            <div class="post-header">
              <h2 class="post-title">Regndagens lek</h2>
              <span class="post-date">12 Maj, 2023</span>
            </div>
            <div class="post-content">
              <p>
                Idag regnade det ute i skogen. Mulle satt i sin stuga och
                tittade ut genom f√∂nstret. Dropparna trummade mot taket.
              </p>
              <p>
                Pl√∂tsligt kom Mulle p√• en id√©. Han tog p√• sig sin gula regnrock
                och gula galoscher och gick ut.
              </p>
              <p>
                Regnet k√§ndes svalt och sk√∂nt mot kinderna. Mulle b√∂rjade hoppa
                i p√∂larna. Plask, plask, plask!
              </p>
              <p>
                Snart kom hans v√§nner - Lilla Myran och Stora Bj√∂rnen - och de
                lekte tillsammans i regnet. Ibland kan en regnig dag vara den
                b√§sta dagen!
              </p>
            </div>
            <div class="post-actions">
              <button class="post-button">Dela</button>
              <button class="post-button">Gilla</button>
              <button class="post-button">Spara</button>
              <button
                class="post-button edit admin-only"
                onclick="editPost(this)"
                style="display: none"
              >
                Redigera
              </button>
              <button
                class="post-button delete admin-only"
                onclick="deletePost(this)"
                style="display: none"
              >
                Ta bort
              </button>
            </div>
          </article>
        </section>

        <aside class="sidebar">
        <!-- Author Login Section -->
        <div class="sidebar-widget auth-section" id="authSection">
          <h3 class="widget-title">‚úçÔ∏è F√∂rfattarverktyg</h3>
          <div id="authContainer">
            <div id="loginSection">
              <p class="author-info">
                <strong>F√∂r f√∂rfattaren:</strong><br>
                Logga in med din Gmail f√∂r att skapa och redigera ber√§ttelser.
              </p>
              <button class="login-button" onclick="signInWithGoogle()">
                üîê Logga in som f√∂rfattare
              </button>
              <p class="login-note">
                <small>Endast f√∂rfattaren kan logga in och redigera inneh√•ll</small>
              </p>
            </div>
            <div id="userSection" style="display: none">
              <div class="user-info">
                <p>‚úÖ Inloggad som f√∂rfattare: <span id="userEmail"></span></p>
              </div>
              <button class="login-button" onclick="signOut()">
                üö™ Logga ut
              </button>
              <div class="admin-controls" id="adminControls">
                <p><strong>üé® F√∂rfattarverktyg aktiverade!</strong></p>
                <p><small>Du kan nu skapa, redigera och ta bort ber√§ttelser</small></p>
              </div>
            </div>
          </div>
        </div>

          <!-- Story Creation Form (Author Only) -->
          <div class="sidebar-widget" id="storyForm" style="display: none">
            <h3 class="widget-title">Skapa ny ber√§ttelse</h3>
            <form class="new-post-form" id="newPostForm">
              <h4 class="form-title">Skriv en ny ber√§ttelse</h4>
              <div class="form-group">
                <label for="postTitle">Titel:</label>
                <input
                  type="text"
                  id="postTitle"
                  required
                  placeholder="T.ex. Mulle m√∂ter en ekorre"
                />
              </div>
              <div class="form-group">
                <label for="postContent">Ber√§ttelse:</label>
                <textarea
                  id="postContent"
                  rows="5"
                  required
                  placeholder="Skriv din ber√§ttelse h√§r..."
                ></textarea>
              </div>
              <button type="submit" class="submit-button">
                Publicera ber√§ttelse
              </button>
            </form>
          </div>

          <!-- Story Browser for Parents -->
          <div class="sidebar-widget">
            <h3 class="widget-title">üìö Hitta ber√§ttelser</h3>
            <div class="story-search">
              <input
                type="text"
                id="storySearch"
                placeholder="S√∂k efter ber√§ttelser..."
                onkeyup="searchStories()"
              />
            </div>
            <div class="story-categories">
              <button class="category-btn" onclick="filterStories('all')">
                Alla
              </button>
              <button class="category-btn" onclick="filterStories('adventure')">
                √Ñventyr
              </button>
              <button
                class="category-btn"
                onclick="filterStories('friendship')"
              >
                V√§nskap
              </button>
              <button class="category-btn" onclick="filterStories('nature')">
                Natur
              </button>
            </div>
          </div>

          <!-- Recent Stories -->
          <div class="sidebar-widget">
            <h3 class="widget-title">üåü Senaste ber√§ttelserna</h3>
            <ul id="recentStories">
              <li>
                <a href="#" onclick="scrollToStory('ekorre')"
                  >Mulle m√∂ter en ekorre</a
                >
              </li>
              <li>
                <a href="#" onclick="scrollToStory('regn')">Regndagens lek</a>
              </li>
              <li>
                <a href="#" onclick="scrollToStory('blomster')"
                  >Blomsterfesten</a
                >
              </li>
              <li>
                <a href="#" onclick="scrollToStory('b√§r')"
                  >Mysteriet med f√∂rsvunna b√§ren</a
                >
              </li>
            </ul>
          </div>

          <!-- Characters -->
          <div class="sidebar-widget">
            <h3 class="widget-title">üé≠ Karakt√§rer</h3>
            <div class="character-grid">
              <div
                class="character-card"
                onclick="showCharacterInfo('skogsmulle')"
              >
                <div class="character-icon">üå≤</div>
                <span>Skogsmulle</span>
              </div>
              <div class="character-card" onclick="showCharacterInfo('myran')">
                <div class="character-icon">ü¶°</div>
                <span>Morris</span>
              </div>
              <div
                class="character-card"
                onclick="showCharacterInfo('bjornen')"
              >
                <div class="character-icon">ü¶î</div>
                <span>Evert</span>
              </div>
              <div class="character-card" onclick="showCharacterInfo('ugglan')">
                <div class="character-icon">ü¶ä</div>
                <span>Ron</span>
              </div>
            </div>
          </div>

          <!-- Reading Tips for Parents -->
          <div class="sidebar-widget">
            <h3 class="widget-title">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Tips f√∂r f√∂r√§ldrar</h3>
            <div class="parent-tips">
              <p>
                üí° L√§s h√∂gt f√∂r dina barn f√∂r att skapa en magisk upplevelse
              </p>
              <p>üé≠ Anv√§nd olika r√∂ster f√∂r varje karakt√§r</p>
              <p>‚ùì St√§ll fr√•gor under l√§sningen f√∂r att engagera barnen</p>
              <p>üåü L√•t barnen v√§lja vilken ber√§ttelse de vill h√∂ra</p>
            </div>
          </div>
        </aside>
      </main>

      <footer>
        <p>¬© 2023 Skogsmulle - Alla √§ventyr √§r v√•ra egna</p>
      </footer>
    </div>

    <script>
      // Audio functionality
      const themeAudio = new Audio();
      themeAudio.src = "Skogsmulle.mp3";

      const adventureAudio = new Audio();
      adventureAudio.src = "telegram_audio.mp3";

      document
        .getElementById("playTheme")
        .addEventListener("click", function () {
          if (themeAudio.paused) {
            themeAudio.play();
            this.textContent = "‚ùö‚ùö";
          } else {
            themeAudio.pause();
            this.textContent = "‚ñ∂";
          }
        });

      document
        .getElementById("playAdventure")
        .addEventListener("click", function () {
          if (adventureAudio.paused) {
            adventureAudio.play();
            this.textContent = "‚ùö‚ùö";
          } else {
            adventureAudio.pause();
            this.textContent = "‚ñ∂";
          }
        });

      // Stop both audios when one starts playing
      themeAudio.addEventListener("play", function () {
        adventureAudio.pause();
        document.getElementById("playAdventure").textContent = "‚ñ∂";
      });

      adventureAudio.addEventListener("play", function () {
        themeAudio.pause();
        document.getElementById("playTheme").textContent = "‚ñ∂";
      });

      // Reset button text when audio ends
      themeAudio.addEventListener("ended", function () {
        document.getElementById("playTheme").textContent = "‚ñ∂";
      });

      adventureAudio.addEventListener("ended", function () {
        document.getElementById("playAdventure").textContent = "‚ñ∂";
      });

      // Blog post functionality
      document
        .getElementById("newPostForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const title = document.getElementById("postTitle").value;
          const content = document.getElementById("postContent").value;

          if (title && content) {
            // Create new blog post
            const newPost = document.createElement("article");
            newPost.className = "blog-post";

            const today = new Date();
            const dateString =
              today.getDate() +
              " " +
              [
                "Jan",
                "Feb",
                "Mar",
                "Apr",
                "Maj",
                "Jun",
                "Jul",
                "Aug",
                "Sep",
                "Okt",
                "Nov",
                "Dec",
              ][today.getMonth()] +
              ", " +
              today.getFullYear();

            newPost.innerHTML = `
                    <div class="post-header">
                        <h2 class="post-title">${title}</h2>
                        <span class="post-date">${dateString}</span>
                    </div>
                    <div class="post-content">
                        <p>${content.replace(/\n/g, "</p><p>")}</p>
                    </div>
                    <div class="post-actions">
                        <button class="post-button">Dela</button>
                        <button class="post-button">Gilla</button>
                        <button class="post-button">Spara</button>
                    </div>
                `;

            // Add to the top of the blog section
            document.querySelector(".blog-section").prepend(newPost);

            // Clear the form
            document.getElementById("newPostForm").reset();

            // Add to recent stories list
            const recentList = document.querySelector(".sidebar-widget ul");
            const newListItem = document.createElement("li");
            const newLink = document.createElement("a");
            newLink.href = "#";
            newLink.textContent = title;
            newListItem.appendChild(newLink);
            recentList.prepend(newListItem);

            // Show success message (could be enhanced with a proper notification)
            alert("Ber√§ttelsen har publicerats!");
          }
        });

      // Blog post functionality
      document
        .getElementById("newPostForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const title = document.getElementById("postTitle").value;
          const content = document.getElementById("postContent").value;

          if (title && content) {
            // Create new blog post
            const newPost = document.createElement("article");
            newPost.className = "blog-post";

            const today = new Date();
            const dateString =
              today.getDate() +
              " " +
              [
                "Jan",
                "Feb",
                "Mar",
                "Apr",
                "Maj",
                "Jun",
                "Jul",
                "Aug",
                "Sep",
                "Okt",
                "Nov",
                "Dec",
              ][today.getMonth()] +
              ", " +
              today.getFullYear();

            newPost.innerHTML = `
            <div class="post-header">
              <h2 class="post-title">${title}</h2>
              <span class="post-date">${dateString}</span>
            </div>
            <div class="post-content">
              <p>${content.replace(/\n/g, "</p><p>")}</p>
            </div>
            <div class="post-actions">
              <button class="post-button">Dela</button>
              <button class="post-button">Gilla</button>
              <button class="post-button">Spara</button>
              <button class="post-button edit admin-only" onclick="editPost(this)" style="display: none;">Redigera</button>
              <button class="post-button delete admin-only" onclick="deletePost(this)" style="display: none;">Ta bort</button>
            </div>
          `;

            // Add to the top of the blog section
            document.querySelector(".blog-section").prepend(newPost);

            // Clear the form
            document.getElementById("newPostForm").reset();

            // Save to storage immediately
            savePostsToStorage();

            // Show admin controls if logged in
            if (isAdmin) {
              showAdminControls();
            }

            // Show success message
            alert("Ber√§ttelsen har publicerats!");
          }
        });

      // Add functionality to post action buttons
      document.addEventListener("click", function (e) {
        if (e.target.classList.contains("post-button")) {
          const action = e.target.textContent;
          const post = e.target.closest(".blog-post");
          const title = post.querySelector(".post-title").textContent;

          switch (action) {
            case "Dela":
              if (navigator.share) {
                navigator.share({
                  title: title,
                  text: "L√§s den h√§r underbara ber√§ttelsen fr√•n Skogsmulle!",
                  url: window.location.href,
                });
              } else {
                alert(`Dela ber√§ttelsen "${title}" med dina v√§nner!`);
              }
              break;
            case "Gilla":
              e.target.textContent = "Gillad!";
              e.target.style.background =
                "linear-gradient(135deg, #98FB98, #87CEEB)";
              break;
            case "Spara":
              e.target.textContent = "Sparad!";
              e.target.style.background =
                "linear-gradient(135deg, #98FB98, #87CEEB)";
              break;
          }
        }
      });

      // Authentication and CRUD functionality
      let isAdmin = false;
      let currentUser = null;

      // Enhanced authentication system
      function initAuth() {
        const savedUser = localStorage.getItem("skogsmulle_user");
        if (savedUser) {
          currentUser = JSON.parse(savedUser);
          if (currentUser.email === "tomasroosguerra@gmail.com") {
            isAdmin = true;
            showAuthorTools();
            showUserSection();
            showAdminControls();
          } else {
            hideAuthorTools();
            showLoginSection();
          }
        } else {
          hideAuthorTools();
          showLoginSection();
        }
      }

      function showAuthorTools() {
        document.getElementById("storyForm").style.display = "block";
        // Auth section is always visible now
      }

      function hideAuthorTools() {
        document.getElementById("storyForm").style.display = "none";
        // Auth section stays visible but shows login form
      }

      function signInWithGoogle() {
        const email = prompt("Ange din Gmail-adress f√∂r att logga in:");
        if (email && email.includes("@gmail.com")) {
          currentUser = { email: email };
          localStorage.setItem("skogsmulle_user", JSON.stringify(currentUser));

          if (email === "tomasroosguerra@gmail.com") {
            isAdmin = true;
            showUserSection();
            showAdminControls();
            alert("V√§lkommen! Du har admin-r√§ttigheter.");
          } else {
            alert("Du har inte admin-r√§ttigheter f√∂r denna sida.");
            signOut();
          }
        }
      }

      function signOut() {
        currentUser = null;
        isAdmin = false;
        localStorage.removeItem("skogsmulle_user");
        hideAuthorTools();
        showLoginSection();
        hideAdminControls();
      }

      // New functionality for audience-specific features
      function scrollToStories() {
        document.querySelector(".blog-section").scrollIntoView({
          behavior: "smooth",
          block: "start",
        });
      }

      function scrollToAdventures() {
        document.querySelector(".blog-section").scrollIntoView({
          behavior: "smooth",
          block: "start",
        });
      }

      function searchStories() {
        const searchTerm = document
          .getElementById("storySearch")
          .value.toLowerCase();
        const stories = document.querySelectorAll(".blog-post");

        stories.forEach((story) => {
          const title = story
            .querySelector(".post-title")
            .textContent.toLowerCase();
          const content = story
            .querySelector(".post-content")
            .textContent.toLowerCase();

          if (title.includes(searchTerm) || content.includes(searchTerm)) {
            story.style.display = "block";
          } else {
            story.style.display = "none";
          }
        });
      }

      function filterStories(category) {
        // Remove active class from all buttons
        document.querySelectorAll(".category-btn").forEach((btn) => {
          btn.classList.remove("active");
        });

        // Add active class to clicked button
        event.target.classList.add("active");

        const stories = document.querySelectorAll(".blog-post");

        stories.forEach((story) => {
          if (category === "all") {
            story.style.display = "block";
          } else {
            // Simple category filtering based on content
            const content = story
              .querySelector(".post-content")
              .textContent.toLowerCase();
            let showStory = false;

            switch (category) {
              case "adventure":
                showStory =
                  content.includes("√§ventyr") ||
                  content.includes("utforska") ||
                  content.includes("resa");
                break;
              case "friendship":
                showStory =
                  content.includes("v√§n") ||
                  content.includes("tillsammans") ||
                  content.includes("hj√§lp");
                break;
              case "nature":
                showStory =
                  content.includes("skog") ||
                  content.includes("tr√§d") ||
                  content.includes("blomma") ||
                  content.includes("djur");
                break;
            }

            story.style.display = showStory ? "block" : "none";
          }
        });
      }

      function scrollToStory(storyId) {
        // Find story by ID or title
        const stories = document.querySelectorAll(".blog-post");
        stories.forEach((story) => {
          const title = story
            .querySelector(".post-title")
            .textContent.toLowerCase();
          if (title.includes(storyId)) {
            story.scrollIntoView({
              behavior: "smooth",
              block: "center",
            });
            // Add highlight effect
            story.style.animation = "magicalGlow 2s ease-in-out";
            setTimeout(() => {
              story.style.animation = "";
            }, 2000);
          }
        });
      }

      function showCharacterInfo(character) {
        const characterInfo = {
          skogsmulle:
            "Skogsmulle √§r huvudkarakt√§ren som bor i skogen och √§lskar √§ventyr! Han har en vacker gr√∂n hatt och √§r alltid redo f√∂r nya uppt√§ckter.",
          myran:
            "Morris √§r en nyfiken vessla med en gr√∂n hatt och scarf. Han √§lskar att utforska skogens hemligheter.",
          bjornen:
            "Evert √§r en v√§nlig igelkott med en r√∂d tomtehatt. Han √§r klok och hj√§lper g√§rna sina v√§nner.",
          ugglan:
            "Ron √§r en r√§vig r√§v med en gr√• hatt. Han √§r snabb och listig, perfekt f√∂r √§ventyr i skogen.",
        };

        alert(
          characterInfo[character] ||
            "Denna karakt√§r √§r en del av Skogsmulles magiska v√§rld!"
        );
      }

      function showUserSection() {
        document.getElementById("loginSection").style.display = "none";
        document.getElementById("userSection").style.display = "block";
        document.getElementById("userEmail").textContent = currentUser.email;
      }

      function showLoginSection() {
        document.getElementById("loginSection").style.display = "block";
        document.getElementById("userSection").style.display = "none";
      }

      function showAdminControls() {
        document.getElementById("adminControls").classList.add("show");
        document.querySelectorAll(".admin-only").forEach((el) => {
          el.style.display = "inline-block";
        });
      }

      function hideAdminControls() {
        document.getElementById("adminControls").classList.remove("show");
        document.querySelectorAll(".admin-only").forEach((el) => {
          el.style.display = "none";
        });
      }

      function editPost(button) {
        const post = button.closest(".blog-post");
        const title = post.querySelector(".post-title").textContent;
        const content = post
          .querySelector(".post-content")
          .textContent.replace(/\n/g, " ")
          .trim();

        const newTitle = prompt("Redigera titel:", title);
        const newContent = prompt("Redigera inneh√•ll:", content);

        if (newTitle && newContent) {
          post.querySelector(".post-title").textContent = newTitle;
          post.querySelector(
            ".post-content"
          ).innerHTML = `<p>${newContent.replace(/\n/g, "</p><p>")}</p>`;
          savePostsToStorage();
          alert("Ber√§ttelsen har uppdaterats!");
        }
      }

      function deletePost(button) {
        if (confirm("√Ñr du s√§ker p√• att du vill ta bort denna ber√§ttelse?")) {
          const post = button.closest(".blog-post");
          post.remove();
          savePostsToStorage();
          alert("Ber√§ttelsen har tagits bort!");
        }
      }

      function savePostsToStorage() {
        const posts = [];
        document.querySelectorAll(".blog-post").forEach((post) => {
          const title = post.querySelector(".post-title").textContent;
          const date = post.querySelector(".post-date").textContent;
          const content = post.querySelector(".post-content").innerHTML;
          posts.push({ title, date, content });
        });
        localStorage.setItem("skogsmulle_posts", JSON.stringify(posts));
      }

      function loadPostsFromStorage() {
        const savedPosts = localStorage.getItem("skogsmulle_posts");
        if (savedPosts) {
          const posts = JSON.parse(savedPosts);
          const blogSection = document.querySelector(".blog-section");

          // Clear existing posts
          blogSection.innerHTML = "";

          // Add saved posts
          posts.forEach((postData) => {
            const post = document.createElement("article");
            post.className = "blog-post";
            post.innerHTML = `
              <div class="post-header">
                <h2 class="post-title">${postData.title}</h2>
                <span class="post-date">${postData.date}</span>
              </div>
              <div class="post-content">
                ${postData.content}
              </div>
              <div class="post-actions">
                <button class="post-button">Dela</button>
                <button class="post-button">Gilla</button>
                <button class="post-button">Spara</button>
                <button class="post-button edit admin-only" onclick="editPost(this)" style="display: none;">Redigera</button>
                <button class="post-button delete admin-only" onclick="deletePost(this)" style="display: none;">Ta bort</button>
              </div>
            `;
            blogSection.appendChild(post);
          });

          // Show admin controls if logged in
          if (isAdmin) {
            showAdminControls();
          }
        }
      }

      // Initialize the application
      document.addEventListener("DOMContentLoaded", function () {
        initAuth();
        loadPostsFromStorage();
      });
    </script>
  </body>
</html>
